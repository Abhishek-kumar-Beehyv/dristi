@startuml
title Register Advocate
Actor Advocate as User
participant RegistrationScreen as UI
Entity AadharServer as Aadhar
participant IndividualSvc as I
participant AdvocateSvc as A
User -> UI : Fill out personal details \n and register self as advocate
UI -> Aadhar ++: Verify if user is valid
alt Verification failed
  return Aadhar not verified
  UI -> UI: Show error message and stop registration
else Success
  Aadhar -> UI: Aadhar verified
end
UI -> I ++: Create Individual with system user flag true \n and isAadharVerified flag true
return Individual payload
UI -> UI: Add individualId to Advocate payload
UI -> A ++: Submit registration
A -> Workflow ++: Trigger workflow for \n advocate approval
return Workflow status
A -> Kafka: Push advocate payload
Persister -> Kafka: Read payload
Persister -> Postgres: Persist data in DB
Indexer -> Kafka: Read payload
Indexer -> Elastic: Push data into index
A -> Notification : Send notification to \n mobile number with registration number
A -> UI: Advocate registration completed
UI -> User: SMS notification with \n registration application number
@enduml